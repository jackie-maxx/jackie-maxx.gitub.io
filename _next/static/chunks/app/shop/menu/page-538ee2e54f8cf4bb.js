(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{7081:function(e,t,s){Promise.resolve().then(s.bind(s,7333))},7333:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return K}});var a,r,l=s(7437);class o{static getType(e){switch(e){case"success":return o.success;case"warning":return o.warning;case"failed":return o.failed;case"info":default:return o.info;case"error":return o.error}}constructor(e){this.value=e}}o.success=new o("success"),o.warning=new o("warning"),o.failed=new o("failed"),o.info=new o("info"),o.error=new o("error");let n=e=>{let{message:t="Information",status:s=o.info}=e;console.log("status : ".concat(t," , message : ").concat(t))};var d=s(5956);let c=e=>{let{message:t="Information",status:s=o.info}=e;s===o.info?(d.Am.info(t),console.log("\x1b[34m status : ".concat(t," , message : ").concat(t," \x1b[0m"))):s===o.success?(d.Am.success(t,{className:"success"}),console.log("\x1b[32m status : ".concat(t," , message : ").concat(t," \x1b[0m"))):s===o.warning?(d.Am.warn(t,{className:"warning"}),console.log("\x1b[33m status : ".concat(t," , message : ").concat(t," \x1b[0m"))):s===o.error?(d.Am.error(t,{className:"danger"}),console.log("\x1b[31m status : ".concat(t," , message : ").concat(t," \x1b[0m"))):s===o.failed?(d.Am.error(t,{className:"danger"}),console.log("\x1b[31m status : ".concat(t," , message : ").concat(t," \x1b[0m"))):(0,d.Am)(t)};var i=s(6420),u=s(8472);let p=async function(e){let{data:t="",method:s="POST"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await (0,u.Z)({url:e,data:t,method:s}).then(e=>e.data).catch(e=>e.data)};class m{}m.mainUrl="https://flipflop-api.maxx4business.com",m.url="/api-mobile-flipflop/v1",m.getHomeMarketplaceQrMenu="".concat(m.mainUrl).concat(m.url,"/get-home-marketplace-qr-menu?"),m.getHomeMarketPlaceQrMenuMore="".concat(m.mainUrl).concat(m.url,"/get-home-marketplace-qr-menu-more?");var f=s(2265),h=s(8179),x=s(1086),g=s(1444),j=s(3213),v=s(1538),N=s(2218),b=s(4839),w=s(6164);function y(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,w.m6)((0,b.W)(t))}let _=(0,N.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),S=f.forwardRef((e,t)=>{let{className:s,variant:a,size:r,asChild:o=!1,...n}=e,d=o?v.g7:"button";return(0,l.jsx)(d,{className:y(_({variant:a,size:r,className:s})),ref:t,...n})});S.displayName="Button";var k=s(1276);let P=f.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,l.jsxs)(k.fC,{ref:t,className:y("relative overflow-hidden",s),...r,children:[(0,l.jsx)(k.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,l.jsx)(M,{}),(0,l.jsx)(k.Ns,{})]})});P.displayName=k.fC.displayName;let M=f.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...r}=e;return(0,l.jsx)(k.gb,{ref:t,orientation:a,className:y("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,l.jsx)(k.q4,{className:"relative flex-1 rounded-full bg-border"})})});M.displayName=k.gb.displayName;let C=f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:y("rounded-xl border bg-card text-card-foreground shadow",s),...a})});C.displayName="Card",f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:y("flex flex-col space-y-1.5 p-6",s),...a})}).displayName="CardHeader",f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("h3",{ref:t,className:y("font-semibold leading-none tracking-tight",s),...a})}).displayName="CardTitle",f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("p",{ref:t,className:y("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription",f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:y("p-6 pt-0",s),...a})}).displayName="CardContent",f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:y("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";var R=s(3274),A=s(4697);(a=r||(r={})).RELEASE="release",a.DEBUG="debug";class U{isRelease(){return"release"===this.appModeStatus}isDebug(){return"debug"===this.appModeStatus}constructor(e){this.appModeStatus=e}}class z{}z.applicationMode=new U(r.RELEASE);var E=s(6648);function G(e){let{width:t=300,height:s=300,src:a,className:r,alt:o=""}=e;return null===a?a="/assets/icons/no-product-img.png":z.applicationMode.isDebug()&&(a=a.replace("https","http")),(0,l.jsx)(E.default,{width:t,height:s,className:r,src:a,alt:o})}var I=s(4860);let q=I.fC;I.xz;let T=I.h_,D=f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(I.aV,{className:y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});D.displayName=I.aV.displayName;let L=f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsxs)(T,{children:[(0,l.jsx)(D,{}),(0,l.jsx)(I.VY,{ref:t,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]})});L.displayName=I.VY.displayName;let F=e=>{let{className:t,...s}=e;return(0,l.jsx)("div",{className:y("flex flex-col space-y-2 text-center sm:text-left",t),...s})};F.displayName="AlertDialogHeader";let O=f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(I.Dx,{ref:t,className:y("text-lg font-semibold",s),...a})});O.displayName=I.Dx.displayName;let Z=f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(I.dk,{ref:t,className:y("text-sm text-muted-foreground",s),...a})});Z.displayName=I.dk.displayName,f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(I.aU,{ref:t,className:y(_(),s),...a})}).displayName=I.aU.displayName,f.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(I.$j,{ref:t,className:y(_({variant:"outline"}),"mt-2 sm:mt-0",s),...a})}).displayName=I.$j.displayName;var H=s(8484);let V=f.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:r=!0,...o}=e;return(0,l.jsx)(H.f,{ref:t,decorative:r,orientation:a,className:y("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...o})});V.displayName=H.f.displayName;let Y=()=>{let e=navigator.userAgent||navigator.vendor;return/iPad|iPhone|iPod/.test(e)&&!/Android/.test(e)?"iOS":/android/i.test(e)?"Android":/Win/.test(e)?"Windows PC":/Mac/.test(e)?"Mac PC":"Other"};function K(){let e=(0,g.I0)(),[t,s]=(0,f.useState)("grid-cols-2"),[a,r]=(0,f.useState)(!1),[d,u]=(0,f.useState)(!0),[v,N]=(0,f.useState)(10),[b,w]=(0,f.useState)("Unknown"),{menuState:y,userShop:_,userShopProductGroups:k,selectedProductGroupCode:U}=(0,i.C)(e=>e.menu),z=async function(){let{isRefresh:t=!1,shopId:s=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a="";t&&(a=m.getHomeMarketplaceQrMenu+"shop_id=".concat(s)),await p(a).then(t=>{if("success"===t.status){e((0,x.GO)(t.user_shop));let s=[...t.user_shop_product_groups].map(e=>{var t;let s={currentPage:1,currentIndex:0,nextPageUrl:null!==(t=e.user_shop_products.next_page_url)&&void 0!==t?t:"",totalRecord:0,loadingStatus:null!=e.user_shop_products.next_page_url?j.g.loaded:j.g.noLoadMore};return{...e,product_state:s}});e((0,x.kM)(s))}else c({message:t.msg,status:o.getType(t.status)})}).catch(e=>{c({message:e.toString(),status:o.failed})}),e((0,x.K4)({...y,loadingStatus:j.g.loaded}))}catch(t){e((0,x.K4)({...y,loadingStatus:j.g.loaded})),n({message:t.toString(),status:o.error})}},E=()=>{window.scrollTo({top:0,behavior:"instant"})},I=async t=>{try{let s=t.product_state.nextPageUrl;""!==s&&await p(s).then(t=>{if("success"===t.status){var s;let a={currentPage:1,currentIndex:0,nextPageUrl:null!==(s=t.user_shop_product_groups[0].user_shop_products.next_page_url)&&void 0!==s?s:"",totalRecord:0,loadingStatus:null!=t.user_shop_product_groups[0].user_shop_products.next_page_url?j.g.loaded:j.g.noLoadMore},r=k.map(e=>e.id==e.id?{...e,user_shop_products:{...e.user_shop_products,data:[...e.user_shop_products.data,...t.user_shop_product_groups[0].user_shop_products.data]},product_state:a}:e);e((0,x.dk)(r))}else c({message:t.msg,status:o.getType(t.status)})}).catch(e=>{c({message:e.toString(),status:o.failed})})}catch(t){e((0,x.K4)({...y,loadingStatus:j.g.loaded})),n({message:t.toString(),status:o.error})}setTimeout(()=>{r(!1)},3e3)};return(0,f.useEffect)(()=>{var e;let t=(e="shop_id",new URLSearchParams(window.location.search).get(e));console.log("shopId : ",t),t&&z({isRefresh:!0,shopId:t})},[]),(0,f.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},1e4);return()=>clearTimeout(e)},[]),(0,f.useEffect)(()=>{let e=setInterval(()=>{N(t=>0===t?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[]),(0,f.useEffect)(()=>{w(Y())},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"relative p-4 flex flex-col justify-between min-h-screen ",children:[(0,l.jsx)(q,{open:d,children:(0,l.jsx)(L,{children:(0,l.jsxs)(F,{className:"relative",children:[(0,l.jsx)(A.Z,{onClick:()=>u(!1),className:"absolute -top-2 -right-2"}),(0,l.jsx)(O,{className:"text-center font-moullight",children:"សូមស្វាគមន៍"}),(0,l.jsx)(O,{className:"text-center",children:"Welcome"}),(0,l.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,l.jsx)("div",{className:"w-full flex justify-center",children:(0,l.jsx)(G,{width:80,height:80,src:"/assets/logo/flipflop_logo.png"})}),(0,l.jsx)("p",{className:"font-semibold text-2xl",children:_.shop_name}),(0,l.jsx)(Z,{className:"line-clamp-3",children:_.description}),(0,l.jsx)(V,{className:"my-1"}),(0,l.jsxs)("div",{className:"mt-2 text-center",children:[(0,l.jsx)("p",{className:"",children:"សូមទាញយកកមម្មវិធីបណ្តាញសង្គម FlipFlop"}),(0,l.jsx)("p",{children:"ដើម្បីទទួលប្រូម៉ូសិនថ្មីពីហាងរបស់យើងខ្ញុំ!"}),(0,l.jsx)("p",{className:"mt-1",children:"Download FlipFlop Social Media and follow us to receive new promotions!"}),(0,l.jsx)(Z,{className:"mt-1",children:"Scan QR code below to download"}),(0,l.jsx)("div",{className:"",children:"iOS"===b?(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"flex justify-center mb-2",children:(0,l.jsx)(G,{width:100,height:100,src:"/assets/qr-code/qr-code-flipflop-apple-store.png"})}),(0,l.jsx)(S,{className:"font-semibold text-sm",children:(0,l.jsx)("a",{href:"https://apps.apple.com/us/app/flipflop-social-network/id6465576581",children:"Yes, I want to download!"})})]}):"Android"===b?(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"flex justify-center mb-2",children:(0,l.jsx)(G,{width:100,height:100,src:"/assets/qr-code/qr-code-flipflop-google-play.png"})}),(0,l.jsx)(S,{className:"font-semibold text-sm",children:(0,l.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.maxx4business.flip_flop&hl=en",children:"Yes, I want to download!"})})]}):(0,l.jsx)("div",{className:"mt-2 w-full",children:(0,l.jsxs)("div",{className:"flex justify-evenly w-full mb-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-sm",children:"App Store"}),(0,l.jsx)(G,{width:100,height:100,src:"/assets/qr-code/qr-code-flipflop-apple-store.png"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-sm",children:"Google Play"}),(0,l.jsx)(G,{width:100,height:100,src:"/assets/qr-code/qr-code-flipflop-google-play.png"})]})]})})})]})]}),(0,l.jsx)(Z,{children:d&&(0,l.jsxs)("div",{className:"alert z-50 mt-6 text-center",children:["This screen will disappear in"," ","".concat(v%60).padStart(2,"0")," seconds."]})})]})})}),(0,l.jsx)("div",{className:"fixed top-0 left-0 bg-[url('/assets/backgrounds/bg_4.jpg')] bg-cover h-full w-full"}),(0,l.jsx)("div",{className:"h-[60px] w-full fixed top-0 left-0 z-10 px-4 overflow-hidden",children:(0,l.jsx)(P,{className:"whitespace-nowrap rounded-md grid grid-cols-1 py-3",children:(0,l.jsxs)("div",{className:"flex",children:[k.length>0&&k.map(t=>(0,l.jsx)("div",{onClick:()=>{e((0,x.o0)(t.product_group_id)),E()},className:"me-2 py-1 px-2 rounded-lg cursor-pointer ".concat(t.product_group_id.toString()===U?"bg-yellow-400 text-white":"bg-white text-black"),children:"".concat(t.local_description)},t.id)),(0,l.jsx)(M,{orientation:"horizontal"})]})})}),(0,l.jsx)("div",{className:"h-full overflow-auto mt-12 mb-2",children:(0,l.jsx)("div",{className:"h-full",children:(()=>{let e=k.find(e=>e.product_group_id.toString()===U);return null!=e?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{children:(0,l.jsx)(h.Z,{className:"relative grid pb-11 ".concat(t," gap-2"),dataLength:e.user_shop_products.data.length,next:()=>I(e),hasMore:""!==e.product_state.nextPageUrl,loader:(0,l.jsx)("div",{className:"absolute bottom-2 left-0 w-full flex justify-center",children:(0,l.jsx)(R.Z,{className:"animate-spin"})}),endMessage:(0,l.jsx)("p",{className:"absolute bottom-0 left-0 w-full text-center",children:(0,l.jsx)("b",{children:"Yay! you have seen all items."})}),children:e.user_shop_products.data.map(e=>(0,l.jsxs)(C,{children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(G,{src:e.thumbnail,className:"bg-slate-400 w-full object-cover rounded-lg"})}),(0,l.jsxs)("div",{className:"p-2 h-[80px] flex flex-col justify-between",children:[(0,l.jsx)("p",{className:"font-semibold leading-4 line-clamp-2 text-sm",children:e.local_description}),(0,l.jsxs)("p",{className:"font-bold text-red-600",children:["USD ",e.unit_price]})]})]},e.id))})})}):(0,l.jsx)(l.Fragment,{})})()})}),(0,l.jsx)("div",{className:"h-[40px]",children:(0,l.jsx)("div",{className:"fixed bottom-0 left-0 z-10 flex justify-between items-center w-full pb-4 pt-2 bg-background px-4",children:(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(S,{onClick:()=>s("grid-cols-1"),className:"rounded-r-none border-r-0 ".concat("grid-cols-1"===t?"bg-yellow-400":""),variant:"outline",children:"1"}),(0,l.jsx)(S,{onClick:()=>s("grid-cols-2"),className:"rounded-none ".concat("grid-cols-2"===t?"bg-yellow-400":""),variant:"outline",children:"4"}),(0,l.jsx)(S,{onClick:()=>s("grid-cols-3"),className:"rounded-l-none border-l-0 ".concat("grid-cols-3"===t?"bg-yellow-400":""),variant:"outline",children:"9"})]})})})})]})})}},1086:function(e,t,s){"use strict";s.d(t,{GO:function(){return u},K4:function(){return n},dk:function(){return i},kM:function(){return d},o0:function(){return c}});var a=s(3213),r=s(6862);let l={menuState:{currentPage:1,currentIndex:0,nextPageUrl:"",totalRecord:0,loadingStatus:a.g.loading},userShop:{},userShopProductGroups:[],selectedProductGroupCode:""},o=(0,r.oM)({name:"menu",initialState:l,reducers:{setLoading(e,t){e.menuState=t.payload},setSelectedProductGroupCode(e,t){e.selectedProductGroupCode=t.payload},setUserShop(e,t){e.userShop=t.payload},setShopMenu(e,t){e.userShopProductGroups=t.payload,e.userShopProductGroups.length>0&&(e.selectedProductGroupCode=e.userShopProductGroups[0].product_group_id)},setShopMenu2(e,t){e.userShopProductGroups=t.payload}}}),{setLoading:n,setShopMenu:d,setSelectedProductGroupCode:c,setShopMenu2:i,setUserShop:u}=o.actions,p=o.reducer;t.ZP=p},6420:function(e,t,s){"use strict";s.d(t,{C:function(){return n},h:function(){return o}});var a=s(1086),r=s(6862),l=s(1444);let o=(0,r.xC)({reducer:{menu:a.ZP}}),n=l.v9},3213:function(e,t,s){"use strict";var a,r;s.d(t,{g:function(){return a}}),(r=a||(a={}))[r.loading=0]="loading",r[r.loadingMore=1]="loadingMore",r[r.noLoadMore=2]="noLoadMore",r[r.loaded=3]="loaded"}},function(e){e.O(0,[601,173,90,971,23,744],function(){return e(e.s=7081)}),_N_E=e.O()}]);